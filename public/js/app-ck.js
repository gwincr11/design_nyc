function drawMap(e,t){var n={zoom:16,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.RIGHT_BOTTOM},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_BOTTOM},scaleControl:!0,scaleControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}};map=new google.maps.Map(document.getElementById("map_canvas"),n)}function addMarker(e){geocoder.geocode({address:e.location},function(t,n){if(n==google.maps.GeocoderStatus.OK){var r=new google.maps.Marker({position:t[0].geometry.location,map:map,title:e.name,id:e.id});google.maps.event.addListener(r,"click",_.bind(function(e){var t=new google.maps.InfoWindow({content:infoTemplate(e),position:r.getPosition(),maxWidth:300,zIndex:1e3});t.open(map);map.setCenter(r.getPosition())},this,e));if(first){map.setCenter(t[0].geometry.location);first=!1}}else alert("Geocode was not successful for the following reason: "+n)})}var infowindow=new google.maps.InfoWindow,geocoder=new google.maps.Geocoder,first=!0,infoTemplate=Handlebars.compile($("#info-box-template").html()),detailsTemplate=Handlebars.compile($("#details-template").html());$("document").ready(function(){var e;drawMap("40.7142","-74.0064");$(window).resize(function(){var e=$(window).height(),t=190;$("#map_canvas").css("height",e-t)}).resize();for(e in projects)addMarker(projects[e]);$("button.details").live("click",function(e){var t=parseInt(this.id.split("-")[1]),n=_.findWhere(projects,{id:t});$("#details-modal").html(detailsTemplate(n)).modal({show:!0})})});